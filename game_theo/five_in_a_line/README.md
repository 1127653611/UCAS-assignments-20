# 基于极大极小搜索的五子棋程序
## 介绍
本程序实现了一个基于极大极小定理（1928，John von Neumann）的五子棋程序，可以实现先手对弈与后手对弈。
## 说明与致谢
本程序的图形界面部分来自中国科学院大学2016年秋季学期本科必修课《C语言程序设计基础》，感谢计算所武成岗老师的指导。\
本程序的经验得分函数部分是本人于2016.12的作品，并使用在上述课程的大作业上。
## 运行环境
本程序用C（C99）编写，只需用gcc编译时加上-std=c99即可。
## 方法
本程序包含两个主要部分：\
第一部分是一个基于经验的得分判断函数（autoscore(int x, int y, int PLAYER)），该函数返回玩家PLAYER在坐标点(x, y)的经验分数。\
第二部分是极大极小搜索算法（struct point autoret()），该函数进行一次深度为3的极大极小搜索并返回搜索结果。
## 实现细节
### 基于经验的得分函数
该函数考虑各种棋型并分别对其评价分数，最后得到一个得分。\
棋型分为活一、活二、冲三、活三、冲四、活四、成五等。这些棋型又分为四个等级，包括直接胜利的棋型、可以决胜的棋型、可以逼迫对手应对的棋型和其它有利于己方的棋型，这四类的得分按数量级递减。
### 极大极小搜索目标函数
极大极小搜索的深度为3，但是由于三级剪枝只留下一枝，因此实际应用极大极小搜索的层数只有2。第一层为我方决策，第二层为对方决策。\
极大极小搜索由一个总体的极大极小目标函数，一个剪枝过程以及极大极小搜索本身构成。\
在极大极小目标函数中，本程序设定了两组参数：\
第一组是对抗系数（ADVERSCONS），指的是对方对目标函数的贡献与己方对目标函数的贡献之比。对抗系数大则偏向防守，反之偏向进攻。\
第二组是贪心率，分为我方贪心率（GREEDYRATE）与对方贪心率（ADVGREEDYRATE），前者指第三层我方对目标函数的贡献与第一层我方对目标函数贡献之比，后者指第三层对方对目标函数的贡献与第二层对方对目标函数贡献之比。贪心率越小越贪心。
### 剪枝策略
在剪枝函数中，本程序用搜索束宽度（SEARCHBEAM1、SEARCHBEAM2）这组参数来设定第一层搜索与第二层搜索剪枝剩余的数目。这两个值设定为10较为恰当。\
剪枝的策略如下：对于棋盘上某一点，该点不被剪枝的充分条件是我方能在该点取得较大的得分，或对方能在该点取得较大的得分。为解释这一点，我们考虑如下的情况：假设该点是对方的一招必杀技，如果此步我方不在该点落子，则下一步对方必在该点落子并对极大极小目标函数造成最大的惩罚。这样，我方落子在其它任何位置都要遭受这一惩罚，只有落子在该点不需要承担这一惩罚。所以在不能事先向下一层搜索的情况下，最简单的策略是将该点对方的得分加到剪枝目标函数上。\
基于这一思想，剪枝目标函数被设定为我方在该点的得分加上对抗系数乘以对方在该点的得分。\
一级剪枝与二级剪枝的宽度由搜索束宽度指定。在三级剪枝的过程中，算法遍历棋盘上所有节点并只选择一个剪枝目标函数最大的点。在一级与二级剪枝的过程中，算法遍历棋盘上所有节点并用一个最小堆辅助选出其中最大的几个点。
## 使用说明
用gcc编译然后运行即可，具体操作在图形界面中有说明。
